{"date":1608412140,"cats":[0,1,3,4,5,8],"content":"<pre><code>\n\n# Update the ubuntu server\nsudo apt-get update &amp;&amp; sudo apt install nano jq wget git  -y &amp;&amp; sudo apt autoremove --purge snapd\n\n\n# install k9s cli \necho '[*] Installing K9s';\nexport k9s_VERSION=$(curl -s https://api.github.com/repos/derailed/k9s/releases | jq -r '.[0].tag_name' | cut -d \"v\" -f 2)\nwget https://github.com/derailed/k9s/releases/download/v$k9s_VERSION/k9s_Linux_x86_64.tar.gz\ntar zxvf  k9s_Linux_x86_64.tar.gz\nmv k9s /usr/local/bin/\n\n\nsudo iptables -F\nsudo iptables -I INPUT -j ACCEPT\ncurl -sfL https://get.k3s.io -o k3s \nchmod +x k3s\n./k3s server  --write-kubeconfig-mode 644  --write-kubeconfig  $HOME/.kube/config --node-name master --bind-address 0.0.0.0 --node-external-ip xx.xx.xx.xx --tls-san k3s.xx.net --cluster-domain k3s.xx.net --no-deploy traefik\nsudo systemctl enable k3s\ncat .kube/config\n#sudo cat /etc/rancher/k3s/k3s.yaml\nsudo cat /var/lib/rancher/k3s/server/node-token\nsudo hostnamectl set-hostname master\n\n#sudo sh -c \"iptables-save &gt; /etc/iptables.rules\"\n\n\ncurl -sfL https://get.k3s.io -o k3s \nchmod +x k3s\n./k3s agent --node-name node1  -token \"xxxxx\" --server \"https://k3s.xx.net:6443\"  --node-external-ip xx.xx.xx.xx\nsudo systemctl enable k3s-agent\nsudo hostnamectl set-hostname node1\n\n</code></pre>","title":"k3s install server and agent","slug":"k3s-install-server-and-agent9pdi"}