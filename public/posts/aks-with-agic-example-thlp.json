{"date":1628099625,"cats":[0,1,2,3,4,8,9,11,13,51],"content":"<p>deployment.yaml</p><pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: aspnetapp\nspec:\n  selector:\n    matchLabels:\n      app: aspnetapp\n      tier: backend\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: aspnetapp\n        tier: backend\n    spec:\n      containers:\n      - name: aspnetapp-image\n        image: mcr.microsoft.com/dotnet/core/samples:aspnetapp\n        resources:\n          requests:\n            cpu: 200m\n            memory: 200Mi\n        readinessProbe:\n          httpGet:\n            path: /\n            port: 80\n          periodSeconds: 30\n          timeoutSeconds: 3\n        env:\n        - name: GET_HOSTS_FROM\n          value: dns\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: aspnetapp\nspec:\n  #type: LoadBalancer\n  selector:\n    app: aspnetapp\n  ports:\n  - protocol: TCP\n    port: 80\n    targetPort: 80\n---\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: aspnetapp\n  annotations:\n    kubernetes.io/ingress.class: azure/application-gateway\n    appgw.ingress.kubernetes.io/backend-path-prefix: /\n    #appgw.ingress.kubernetes.io/appgw-ssl-certificate: \"wildcard.apps.com\"\n    #appgw.ingress.kubernetes.io/ssl-redirect: \"true\"\nspec:\n  rules:\n  - http:\n      paths:\n      - path: /app\n        pathType: Prefix\n        backend:\n          service:\n            name: aspnetapp\n            port:\n              number: 80\n---\n</code></pre>","title":"AKS with AGIC example","slug":"aks-with-agic-example-thlp"}