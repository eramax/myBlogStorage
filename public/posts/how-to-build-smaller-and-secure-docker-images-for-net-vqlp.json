{"date":1626789241,"cats":[0,1,2,3,8,9,13,48,51],"content":"<p>Source&nbsp;<a href=\"https://www.thorsten-hans.com/how-to-build-smaller-and-secure-docker-images-for-net5/\">https://www.thorsten-hans.com/how-to-build-smaller-and-secure-docker-images-for-net5/</a></p><pre><code>FROM mcr.microsoft.com/dotnet/sdk:5.0-alpine AS publish\nWORKDIR /src\nCOPY ContainerSample.csproj ./\n\nRUN dotnet restore \"./ContainerSample.csproj\" --runtime alpine-x64\nCOPY . .\nRUN dotnet publish \"ContainerSample.csproj\" -c Release -o /app/publish \\\n  --no-restore \\\n  --runtime alpine-x64 \\\n  --self-contained true \\\n  /p:PublishTrimmed=true \\\n  /p:PublishSingleFile=true\n\nFROM mcr.microsoft.com/dotnet/runtime-deps:5.0-alpine AS final\n\nRUN adduser --disabled-password \\\n  --home /app \\\n  --gecos '' dotnetuser &amp;&amp; chown -R dotnetuser /app\n\n# upgrade musl to remove potential vulnerability\nRUN apk upgrade musl\n\nUSER dotnetuser\nWORKDIR /app\nEXPOSE 5000\nCOPY --from=publish /app/publish .\n\nENTRYPOINT [\"./ContainerSample\", \"--urls\", \"http://localhost:5000\"]</code></pre>","title":"How to build smaller and secure Docker Images for .NET","slug":"how-to-build-smaller-and-secure-docker-images-for-net-vqlp"}